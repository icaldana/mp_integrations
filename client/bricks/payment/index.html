<html>

<body>
    <div id="cardPaymentBrick_container"></div>
</body>

</html>
<script src="https://sdk.mercadopago.com/js/v2"></script>

<script>
    const mp = new MercadoPago("APP_USR-76f5518f-ee38-4fd8-803f-fb19f907c40e");
    const bricksBuilder = mp.bricks();

    const renderPaymentBrick = async (bricksBuilder) => {
        const settings = {
            initialization: {
                amount: 1000, //value of the payment to be processed
            },
            customization: {
                visual: {
                    style: {
                        theme: "dark", // 'default' |'dark' | 'bootstrap' | 'flat'
                    },
                    texts: {
                        formTitle: "",
                        emailSectionTitle: "",
                        installmentsSectionTitle: "",
                        cardholderName: {
                            label: "",
                            placeholder: "",
                        },
                        email: {
                            label: "",
                            placeholder: "",
                        },
                        cardholderIdentification: {
                            label: "",
                        },
                        cardNumber: {
                            label: "",
                            placeholder: "",
                        },
                        expirationDate: {
                            label: "",
                            placeholder: "",
                        },
                        securityCode: {
                            label: "",
                            placeholder: "",
                        },
                        selectInstallments: "",
                        selectIssuerBank: "",
                        formSubmit: "",
                        paymentMethods: {
                            newCreditCardTitle: "aaaaaa",
                            creditCardTitle: "bbbbbbb",
                            creditCardValueProp: " cccccc",
                            newDebitCardTitle: "aaaaaaa",
                            debitCardTitle: "ddddd",
                            debitCardValueProp: "",
                            ticketTitle: "",
                            ticketValueProp: "",
                        },
                    },
                },
                paymentMethods: {
                    ticket: "all",
                    bankTransfer: "all",
                    creditCard: "all",
                    debitCard: "all",
                    mercadoPago: "all",
                },
            },
            callbacks: {
                onSubmit: ({ selectedPaymentMethod, formData }) => {
                    return new Promise((resolve, reject) => {
                        fetch("/process_payment", {
                            method: "POST",
                            headers: {
                                "Content-Type": "application/json",
                            },
                            body: JSON.stringify(formData),
                        })
                            .then((resp) => resp.json())
                            .then((response) => {
                                // get payment result
                                resolve();
                            })
                            .catch((error) => {
                                // get payment result error
                                reject();
                            });
                    });
                },
                onReady: () => {
                    // handle form ready
                },
                onError: (error) => {
                    // handle error
                },
            },
        };

        cardPaymentBrickController = await bricksBuilder.create(
            "payment",
            "cardPaymentBrick_container",
            settings
        );
    };

    renderPaymentBrick(bricksBuilder);
</script>